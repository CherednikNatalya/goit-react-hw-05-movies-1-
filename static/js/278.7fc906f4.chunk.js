(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[278],{9278:function(e,t,r){"use strict";r.r(t);var n=r(5861),a=r(9439),u=r(7757),c=r.n(u),i=r(1686),s=r.n(i),o=r(2791),f=r(4635),p=r(2019),l=r(7214),d=r(1087),h=r(7689),v=r(2852),m=r(184);s().Notify.init({width:"400px",fontSize:"15px"});t.default=function(){var e=(0,o.useState)(p.Z.idle),t=(0,a.Z)(e,2),r=t[0],u=t[1],i=(0,d.lr)(),x=(0,a.Z)(i,2),y=x[0],g=x[1],w=(0,o.useState)([]),Z=(0,a.Z)(w,2),k=Z[0],b=Z[1],j=y.get("query"),_=(0,h.TH)();(0,o.useEffect)((function(){if(j&&""!==j){var e=function(){var e=(0,n.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(p.Z.pending),e.prev=1,e.next=4,(0,f.bI)(j);case 4:t=e.sent,S(t),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),u(p.Z.error);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();e()}}),[j]);var S=function(e){if(0===e.length)return s().Notify.failure("Sorry, there are no images matching your search query. Please try again."),void u(p.Z.idle);var t=e.map((function(e){return{id:e.id,img:e.poster_path,title:e.original_title}}));b(t),u(p.Z.success)};return(0,m.jsxs)(v.Section,{children:[(0,m.jsxs)(v.Form,{onChange:function(e){e.preventDefault();var t=e.target.elements.search.value;""===t&&s().Notify.info("Please, fill in the search field!"),b([]),g({query:t})},children:[(0,m.jsx)(v.Input,{type:"text",name:"search",placeholder:"Enter movie name",autofocus:!0,autoComplete:"off"}),(0,m.jsx)(v.Btn,{type:"submit",children:"Search"})]}),r===p.Z.pending&&(0,m.jsx)(l.Z,{}),r===p.Z.success&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(v.Title,{children:"Search results"}),(0,m.jsx)(v.List,{children:k.map((function(e){var t=e.id,r=e.title;return(0,m.jsx)(v.Item,{children:(0,m.jsx)(d.rU,{to:"movies/".concat(t),state:{from:_},children:(0,m.jsx)(v.TitleMovie,{children:r})})},t)}))})]})]})}},2852:function(){},4635:function(e,t,r){"use strict";r.d(t,{IV:function(){return l},Sg:function(){return p},bI:function(){return f},wH:function(){return d},wr:function(){return o}});var n=r(5861),a=r(7757),u=r.n(a),c=r(1243),i="b52f4a97df843a5ead1cf8ccfba387fd",s=c.Z.create({baseURL:"https://api.themoviedb.org/3/"}),o=function(){var e=(0,n.Z)(u().mark((function e(){var t,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.get("trending/movie/day",{params:{api_key:i}});case 2:return t=e.sent,r=t.data.results,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=(0,n.Z)(u().mark((function e(t){var r,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.get("search/movie",{params:{api_key:i,query:t}});case 2:return r=e.sent,n=r.data.results,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,n.Z)(u().mark((function e(t){var r,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.get("movie/".concat(t),{params:{api_key:i}});case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=(0,n.Z)(u().mark((function e(t){var r,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.get("movie/".concat(t,"/credits"),{params:{api_key:i}});case 2:return r=e.sent,n=r.data.cast,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=(0,n.Z)(u().mark((function e(t){var r,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.get("movie/".concat(t,"/reviews"),{params:{api_key:i}});case 2:return r=e.sent,n=r.data.results,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},2019:function(e,t){"use strict";t.Z={idle:"idle",pending:"pending",success:"success",error:"error"}}}]);
//# sourceMappingURL=278.7fc906f4.chunk.js.map